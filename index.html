<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; font-src 'self' https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline'; connect-src *; frame-src *;">
    <title>Parts Finder - Limitless LLC</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <style>
        /* Add all your styles here (same as previous cart.html and index.html combined) */
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
        body{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);color:#2d3748;line-height:1.6;min-height:100vh}
        .container{max-width:1200px;margin:0 auto;padding:20px}

        /* Header */
        .header{ text-align:center; margin-bottom:30px; padding:30px 20px; background:linear-gradient(120deg,#2c3e50 0%,#3498db 100%); color:#fff; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.15); position:relative;}
        .header h1{ font-size:2.8rem; margin-bottom:10px; font-weight:700;}
        .header p{ font-size:1.2rem; opacity:.9; max-width:700px; margin:0 auto;}
        .cart-icon-header{ position:absolute; top:20px; right:20px; cursor:pointer; font-size:24px; color:white; display:flex; align-items:center; gap:8px;}
        .cart-count{ background:#e74c3c; color:white; border-radius:50%; width:24px; height:24px; display:flex; align-items:center; justify-content:center; font-size:14px; font-weight:bold;}

        /* Search Section */
        .search-section{ background:white; border-radius:16px; padding:30px; box-shadow:0 5px 20px rgba(0,0,0,.08); margin-bottom:30px;}
        .search-box{ display:flex; gap:15px; margin-bottom:25px; flex-wrap:wrap;}
        .search-input{ flex:1; min-width:300px; padding:18px 22px; border:2px solid #e2e8f0; border-radius:12px; font-size:16px; transition:.3s; box-shadow:0 2px 5px rgba(0,0,0,.05);}
        .search-input:focus{ border-color:#3498db; box-shadow:0 0 0 3px rgba(52,152,219,.2); outline:none;}
        .search-btn{ padding:18px 32px; background:linear-gradient(120deg,#2980b9 0%,#3498db 100%); color:white; border:none; border-radius:12px; cursor:pointer; font-size:16px; font-weight:600; transition:.3s; box-shadow:0 4px 8px rgba(52,152,219,.3);}
        .search-btn:hover{ transform:translateY(-2px); box-shadow:0 6px 12px rgba(52,152,219,.4);}

        /* Filters */
        .filters{ display:flex; gap:25px; flex-wrap:wrap; margin-bottom:20px; padding:20px; background:#f8f9fa; border-radius:12px;}
        .filter-item{ display:flex; align-items:center; gap:10px;}
        .filter-item input{ width:20px; height:20px; cursor:pointer;}
        .filter-item label{ font-weight:500; cursor:pointer;}

        /* Results */
        .results-grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(320px,1fr)); gap:25px; margin-bottom:40px;}
        .result-card{ border:1px solid #e2e8f0; border-radius:16px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,.08); transition:.3s; background:white; display:flex; flex-direction:column; position:relative;}
        .result-card:hover{ transform:translateY(-5px); box-shadow:0 12px 20px rgba(0,0,0,.15);}
        .card-image{ display:flex; align-items:center; justify-content:center; height:220px; border-bottom:1px solid #f1f1f1; background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);}
        .card-image img{ max-width:85%; max-height:200px; object-fit:contain;}
        .card-content{ padding:20px; flex-grow:1; display:flex; flex-direction:column;}
        .part-number{ font-weight:700; margin-bottom:8px; font-size:18px; color:#2c3e50;}
        .brand-uom{ font-size:14px; color:#718096; margin-bottom:12px;}
        .description{ font-size:14px; color:#4a5568; margin-bottom:15px; flex-grow:1;}
        .chips{ display:flex; flex-wrap:wrap; gap:8px; margin-bottom:15px;}
        .chip{ display:inline-block; padding:6px 12px; border-radius:999px; font-size:12px; font-weight:500;}
        .chip.price{ background:#ebf8ff; color:#2b6cb0; border:1px solid #bee3f8;}
        .chip.stock{ background:#f0fff4; color:#2f855a; border:1px solid #c6f6d5;}
        .chip.core{ background:#fff5f5; color:#c53030; border:1px solid #fed7d7;}
        .alt-pns{ margin-top:12px; font-size:13px; color:#718096;}
        .quantity-control{ display:flex; align-items:center; margin:15px 0; gap:10px;}
        .quantity-label{ font-weight:500; color:#4a5568;}
        .quantity-input{ width:70px; padding:8px 12px; border:1px solid #ddd; border-radius:6px; text-align:center;}
        .qty-btn{ width:36px; height:36px; border:1px solid #ddd; background:white; border-radius:8px; cursor:pointer; font-weight:700;}
        .qty-btn:active{ transform:scale(.97)}

        /* Cart Section */
        .cart-section{ background:white; border-radius:16px; padding:30px; box-shadow:0 5px 20px rgba(0,0,0,.08); margin-top:30px;}
        .cart-header{ margin-bottom:20px;}
        .cart-items{ margin-bottom:20px;}
        .cart-total{ font-weight:700; font-size:18px;}

        /* Checkout Section */
        .customer-info-section{ margin-top:20px; border-top:2px solid #e2e8f0; padding-top:20px;}
        .form-input{ padding:12px; border-radius:8px; border:1px solid #ddd; font-size:16px;}
        .checkout-btn{ padding:12px 24px; background:#2c3e50; color:white; border-radius:8px; cursor:pointer; font-weight:600;}
    </style>
</head>
<body>
<div class="container">
    <!-- Header Section -->
    <div class="header">
        <h1><i class="fas fa-search"></i> Part Finder</h1>
        <p>Search our extensive inventory of diesel engine parts</p>
        <div class="cart-icon-header" onclick="goToCart()">
            <i class="fas fa-shopping-cart"></i>
            <div class="cart-count" id="cart-count">0</div>
        </div>
    </div>

    <!-- Search Section -->
    <div class="search-section">
        <div class="search-box">
            <input class="search-input" id="lf-input" placeholder="Enter part number, description, or keyword..."/>
            <button class="search-btn" id="lf-btn"><i class="fas fa-search"></i> Search</button>
        </div>
        <div class="filters">
            <div class="filter-item"><input id="lf-exact" type="checkbox"/><label for="lf-exact">Exact Match</label></div>
            <div class="filter-item"><input id="lf-alt" type="checkbox" checked/><label for="lf-alt">Include Alternate Parts</label></div>
            <div class="filter-item"><input id="lf-instock" type="checkbox"/><label for="lf-instock">In Stock Only</label></div>
        </div>
        <div class="status" id="lf-status"><i class="fas fa-info-circle"></i> Loading parts catalog...</div>
    </div>

    <!-- Results Section -->
    <div class="results-grid" id="lf-results"></div>

    <!-- Cart Section -->
    <div class="cart-section" id="cart-section">
        <div class="cart-header">
            <h2>Your Cart</h2>
            <div class="cart-items" id="cart-items"></div>
            <div class="cart-total" id="cart-total">Total: $0.00</div>
        </div>

        <!-- Customer Info and Checkout -->
        <div class="customer-info-section">
            <h3>Customer Information</h3>
            <input class="form-input" id="customer-email" placeholder="your.email@example.com" type="email"/>
            <input class="form-input" id="customer-phone" placeholder="+1 470 608 3818" type="tel"/>
            <input class="form-input" id="customer-name" placeholder="First and Last Name" type="text"/>
            <input class="form-input" id="customer-address1" placeholder="Street address, P.O. box" type="text"/>
            <!-- Add other customer info fields here -->
        </div>

        <button class="checkout-btn" id="checkout-button">Proceed to Checkout</button>
    </div>
</div>

<script>
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    const checkoutButton = document.getElementById('checkout-button');
    const cartCount = document.getElementById('cart-count');

    let cart = [];
    let catalog = [];
    let currentResults = [];

    // Simulate loading catalog data
    function loadCatalog() {
        catalog = [
            { id: 'part1', name: 'Part 1', price: 100 },
            { id: 'part2', name: 'Part 2', price: 150 },
            { id: 'part3', name: 'Part 3', price: 200 },
            { id: 'part4', name: 'Part 4', price: 250 },
        ];
        renderResults();
    }

    // Search Logic
    document.getElementById('lf-btn').addEventListener('click', search);

    function search() {
        const query = document.getElementById('lf-input').value.trim();
        if (!query) return;
        
        // Filter catalog based on query
        currentResults = catalog.filter(part => part.name.toLowerCase().includes(query.toLowerCase()));
        renderResults();
    }

    function renderResults() {
        const resultsHtml = currentResults.map(part => {
            return `<div class="result-card">
                        <div class="card-content">
                            <div class="part-number">${part.name}</div>
                            <div class="part-price">$${part.price}</div>
                            <button class="add-to-cart-btn" onclick="addToCart('${part.id}', '${part.name}', ${part.price})">Add to Cart</button>
                        </div>
                    </div>`;
        }).join('');
        document.getElementById('lf-results').innerHTML = resultsHtml;
    }

    function addToCart(id, name, price) {
        const item = { id, name, price, quantity: 1 };
        cart.push(item);
        updateCart();
    }

    function updateCart() {
        const cartHtml = cart.map(item => {
            return `<div class="cart-item">
                        <div>${item.name}</div>
                        <div>${item.quantity} x $${item.price}</div>
                    </div>`;
        }).join('');
        cartItems.innerHTML = cartHtml;
        cartTotal.textContent = `Total: $${cart.reduce((sum, item) => sum + item.price * item.quantity, 0)}`;
        cartCount.textContent = cart.length;
    }

    checkoutButton.addEventListener('click', async () => {
        const customerEmail = document.getElementById('customer-email').value;
        const customerName = document.getElementById('customer-name').value;

        if (!customerEmail || !customerName || cart.length === 0) {
            alert("Please fill out all fields and add items to your cart.");
            return;
        }

        const orderData = {
            customer: {
                email: customerEmail,
                name: customerName,
                // Add more customer data as needed
            },
            items: cart.map(item => ({
                part_number: item.name,
                quantity: item.quantity,
                price: item.price,
            }))
        };

        try {
            const response = await fetch('https://your-backend-url/checkout', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(orderData)
            });
            const result = await response.json();
            if (result.success) {
                alert("Your order has been placed!");
            } else {
                alert("There was an error processing your order.");
            }
        } catch (error) {
            alert("An error occurred while sending the order.");
        }
    });

    // Go to cart page (simplified for this page)
    function goToCart() {
        window.location.href = '#cart-section';  // Simply scroll to cart section
    }

    // Initialize catalog on page load
    loadCatalog();
</script>

</body>
</html>
